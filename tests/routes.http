# install REST Client vscode extension. https://marketplace.visualstudio.com/items?itemName=humao.rest-client
# Here will be tests for all upcoming routes use this as a guide to better understand the api behaviour


# GET the discovery document of the server: (No authorization required)
# READ THIS DOCUMENT FOR A DETAILED DESCRIPTION OF EACH ROUTE

@jwt_token = put_token_here_and_uncomment_cookie_header_and_disable_cookie_feature_from_settings_to_manually_pass_the_token


GET https://transcendence.fr/api/.well-known/discovery





###### START GOOGLE OAUTH TESTs (No authorization required) ######

# GET a random state_code for OAuth flow:
GET https://transcendence.fr/api/OAuth/state


###### END GOOGLE OAUTH TESTs ######





###### START USER/PWD TESTs (No authorization required) ######

# Signup standard user:
POST https://transcendence.fr/api/user/signup
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="username"

msitni
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="password"

very_hard_password
--boundary13132121321H_4zdzdz90dlzkn--

###

# Signin standard user:
POST https://transcendence.fr/api/user/signin
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="username"

msitni
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="password"

very_hard_password
--boundary13132121321H_4zdzdz90dlzkn--

###

# LogOut Current user:
POST https://transcendence.fr/api/logout
#Cookie: jwt={{jwt_token}}



###### END USER/PWD TESTs ######





###### START TOTP 2FA TESTs ######

# Get 2fa string: (Authorization required)
GET https://transcendence.fr/api/2FA/geturi
#Cookie: jwt={{jwt_token}}

###

# Enable 2fa: (Authorization required)
POST https://transcendence.fr/api/2FA/enable
#Cookie: jwt={{jwt_token}}

###

# Disable 2fa: (Authorization required)
POST https://transcendence.fr/api/2FA/disable
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="code"

send 6 digits totp code to disable
--boundary13132121321H_4zdzdz90dlzkn--


###

# Verify totp code and obtain jwt (No authorization required):
POST https://transcendence.fr/api/2FA/verify?state=StateObtainedFromSignIn
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="code"

send 6 digits totp code to get jwt
--boundary13132121321H_4zdzdz90dlzkn--


###### END TOTP 2FA TESTs ######





###### START REFRESH TOKEN TESTs ######

# List active connections: (Authorization required)
GET https://transcendence.fr/api/jwt/list
#Cookie: jwt={{jwt_token}}

###

# Revoke refresh token: (Authorization required)
POST https://transcendence.fr/api/jwt/revoke?token_id=
#Cookie: jwt={{jwt_token}}


###### END REFRESH TOKEN TESTs ######





###### START USER MANAGEMENT TESTs (Authorization required) ######

# GET user info by uid:
GET https://transcendence.fr/api/user/info?uid=
#Cookie: jwt={{jwt_token}}

###

# GET current logged user info (uid alias for me):
GET https://transcendence.fr/api/user/info?uid=me
#Cookie: jwt={{jwt_token}}

###

# Check if username is available: (No authorization required)
GET https://transcendence.fr/api/user/namecheck?username=msitni1337

###

# Change current logged user info:
POST https://transcendence.fr/api/user/info
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="username"

msitni
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="bio"

hey everyone this is my new bio.
--boundary13132121321H_4zdzdz90dlzkn--

###

# Update current user password:
POST https://transcendence.fr/api/user/passwd
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="old_password"

very_hard_password
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="new_password"

eeXtr3meLy_hard_dworssap=123
--boundary13132121321H_4zdzdz90dlzkn--

###

# Delete user's profile picture
DELETE https://transcendence.fr/api/user/remove_picture
#Cookie: jwt={{jwt_token}}

###

###### END USER MANAGEMENT TESTs ######





###### START FRIENDS SYSTEM TESTs (Authorization required) ######

# Get current user friends list
GET https://transcendence.fr/api/friends
#Cookie: jwt={{jwt_token}}

###

# Get current user friends requests
GET https://transcendence.fr/api/friends/requests
#Cookie: jwt={{jwt_token}}

###

# Get current user sent friends requests
GET https://transcendence.fr/api/friends/sent_requests
#Cookie: jwt={{jwt_token}}

###

# Send a friend request
POST https://transcendence.fr/api/friends/request?uid=
#Cookie: jwt={{jwt_token}}

###

# Accept a friend request
POST https://transcendence.fr/api/friends/accept?uid=
#Cookie: jwt={{jwt_token}}

###

# Deny a friend request
POST https://transcendence.fr/api/friends/deny?uid=
#Cookie: jwt={{jwt_token}}

###

# Remove a friend
POST https://transcendence.fr/api/friends/remove?uid=
#Cookie: jwt={{jwt_token}}
 
###

###### END FRIENDS SYSTEM TESTs ######


###### START NOTIFICATION TESTs (Authorization required) ######

# Get a ticket to use for wss sockets:
GET https://transcendence.fr/api/notifications/ticket
#Cookie: jwt={{jwt_token}}


###

# List unread notifications:
GET https://transcendence.fr/api/notifications/list_unread
#Cookie: jwt={{jwt_token}}


###

# List all notifications:
GET https://transcendence.fr/api/notifications/list_all
#Cookie: jwt={{jwt_token}}


###

# Mark a notification as read:
POST https://transcendence.fr/api/notifications/mark_as_read?uid=
#Cookie: jwt={{jwt_token}}


###

# Delete a notification:
POST https://transcendence.fr/api/notifications/delete?uid=
#Cookie: jwt={{jwt_token}}


###

# Send a Poke notification to a friend:
POST https://transcendence.fr/api/poke?uid=
#Cookie: jwt={{jwt_token}}


###


# Listen to notifications ping using WebSocket:
GET wss://transcendence.fr/api/notifications/push_notification
Sec-WebSocket-Protocol: {{jwt_token}}

###### END NOTIFICATION TESTs ######



###### START LEADERBOARD TESTs (Authorization required) ######

# Get leaderboard rank for all users:
GET https://transcendence.fr/api/leaderboard/list
#Cookie: jwt={{jwt_token}}


###

# Get leaderboard rank for current user:
GET https://transcendence.fr/api/leaderboard/myrank
#Cookie: jwt={{jwt_token}}

###### END LEADERBOARD TESTs ######

###### START MATCH MANAGER TESTs (Authorization required) ######

# Get match history for a specific user:
GET https://transcendence.fr/api/match/history?uid=
#Cookie: jwt={{jwt_token}}


###
# Get match history for a current user:
GET https://transcendence.fr/api/match/history
#Cookie: jwt={{jwt_token}}

###
# Create a new match with type (see MatchTypeEnum for available match types):
POST https://transcendence.fr/api/match/create?match_type=
#Cookie: jwt={{jwt_token}}

###
# Win a match by uid:
POST https://transcendence.fr/api/match/win
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="match_uid"

put_match_uid_here
--boundary13132121321H_4zdzdz90dlzkn--

###
# Lose a match by uid:
POST https://transcendence.fr/api/match/lose
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="match_uid"

put_match_uid_here
--boundary13132121321H_4zdzdz90dlzkn--

###### END MATCH MANAGER TESTs ######


###### START CHAT MANAGER TESTs (Authorization required) ######

# Create a new conversation and send a message to the user:
POST https://transcendence.fr/api/chat/new
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="name"

name_to_give_to_conversation
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="to_uid"

uid_of_the_receiver
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="message"

message text
--boundary13132121321H_4zdzdz90dlzkn--

###

# Rename a conversation:
POST https://transcendence.fr/api/chat/rename?uid=
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="name"

name_to_give_to_conversation
--boundary13132121321H_4zdzdz90dlzkn--

###

# Send a message to a conversation:
POST https://transcendence.fr/api/chat/send?uid=
#Cookie: jwt={{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="message"

message text
--boundary13132121321H_4zdzdz90dlzkn--

###

# block a user by uid:
POST https://transcendence.fr/api/chat/block?uid=
#Cookie: jwt={{jwt_token}}

###

# unblock a user by uid:
POST https://transcendence.fr/api/chat/unblock?uid=
#Cookie: jwt={{jwt_token}}

###

# Get blocked users list:
GET https://transcendence.fr/api/chat/blocked
#Cookie: jwt={{jwt_token}}

###

# Get list of conversations infos [{uid, name, users uids}]:
GET https://transcendence.fr/api/chat/list
#Cookie: jwt={{jwt_token}}

###

# Get a conversation messages with uid and page:
GET https://transcendence.fr/api/chat/read?uid=XXX&page=2
#Cookie: jwt={{jwt_token}}


###### END CHAT MANAGER TESTs ######

# Check if a user is online 200 for active 404 inactive:
GET https://transcendence.fr/api/user/status?uid=
#Cookie: jwt={{jwt_token}}

###
