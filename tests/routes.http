# install REST Client vscode extension. https://marketplace.visualstudio.com/items?itemName=humao.rest-client
# Here will be tests for all upcoming routes use this as a guide to better understand the api behaviour


# GET the discovery document of the server: (No authorization required)
# READ THIS DOCUMENT FOR A DETAILED DESCRIPTION OF EACH ROUTE
GET https://server.transcendence.fr/.well-known/discovery





###### START GOOGLE OAUTH TESTs (No authorization required) ######

# GET a random state_code for OAuth flow:
GET https://server.transcendence.fr/OAuth/state


###### END GOOGLE OAUTH TESTs ######





###### START USER/PWD TESTs (No authorization required) ######

# Signup standard user:
POST https://server.transcendence.fr/user/signup
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="username"

msitni
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="password"

very_hard_password
--boundary13132121321H_4zdzdz90dlzkn--

###

# Signin standard user:
POST https://server.transcendence.fr/user/signin
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="username"

msitni
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="password"

very_hard_password
--boundary13132121321H_4zdzdz90dlzkn--

###### END USER/PWD TESTs ######





###### START TOTP 2FA TESTs ######

# Enable 2fa: (Authorization required)
POST https://server.transcendence.fr/2FA/enable
Authorization: Bearer {{jwt_token}}


###

# Disable 2fa: (Authorization required)
POST https://server.transcendence.fr/2FA/disable
Authorization: Bearer {{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="code"

send 6 digits totp code to disable
--boundary13132121321H_4zdzdz90dlzkn--


###

# Verify totp code and obtain jwt (No authorization required):
POST https://server.transcendence.fr/2FA/verify?state=StateObtainedFromSignIn
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="code"

send 6 digits totp code to get jwt
--boundary13132121321H_4zdzdz90dlzkn--


###### END TOTP 2FA TESTs ######





###### START USER MANAGEMENT TESTs (Authorization required) ######

# GET user info by uid:
GET https://server.transcendence.fr/user/info?uid=
Authorization: Bearer {{jwt_token}}

###

# GET current logged user info (uid alias for me):
GET https://server.transcendence.fr/user/info?uid=me
Authorization: Bearer {{jwt_token}}

###

# Check if username is available: (No authorization required)
GET https://server.transcendence.fr/user/namecheck?username=msitni1337

###

# Change current logged user info:
POST https://server.transcendence.fr/user/info
Authorization: Bearer {{jwt_token}}
Content-Type: multipart/form-data; boundary=boundary13132121321H_4zdzdz90dlzkn

--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="username"

msitni
--boundary13132121321H_4zdzdz90dlzkn
Content-Disposition: form-data; name="bio"

hey everyone this is my new bio.
--boundary13132121321H_4zdzdz90dlzkn--

###

# Delete user's profile picture
DELETE https://server.transcendence.fr/user/remove_picture
Authorization: Bearer {{jwt_token}}

###

###### END USER MANAGEMENT TESTs ######





###### START FRIENDS SYSTEM TESTs (Authorization required) ######

# Get current user friends list
GET https://server.transcendence.fr/friends
Authorization: Bearer {{jwt_token}}

###

# Get current user friends requests
GET https://server.transcendence.fr/friends/requests
Authorization: Bearer {{jwt_token}}

###

# Send a friend request
POST https://server.transcendence.fr/friends/request?uid=
Authorization: Bearer {{jwt_token}}

###

# Accept a friend request
POST https://server.transcendence.fr/friends/accept?uid=
Authorization: Bearer {{jwt_token}}

###

# Deny a friend request
POST https://server.transcendence.fr/friends/deny?uid=
Authorization: Bearer {{jwt_token}}

###

# Remove a friend
POST https://server.transcendence.fr/friends/remove?uid=
Authorization: Bearer {{jwt_token}}
 
###

###### END FRIENDS SYSTEM TESTs ######


###### START NOTIFICATION TESTs (Authorization required) ######

# Listen to notifications ping using WebSocket:
GET wss://server.transcendence.fr/notifications/push_notification
Sec-WebSocket-Protocol: {{jwt_token}}

###### END NOTIFICATION TESTs ######



@jwt_token = jwt_token_here